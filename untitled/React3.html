<!DOCTYPE html>
<html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Document</title>
   <script src="https://unpkg.com/react@^16/umd/react.production.min.js"></script>
   <script src="https://unpkg.com/react-dom@16.13.0/umd/react-dom.production.min.js"></script>
   <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
 </head>
 <body>
   <div id="root"></div>


   <script type="text/babel">
     class Parent extends React.Component {
       constructor(props) {
         super(props);


         this.state = {
           balance: 100,
           motto: "keep calm and study hard",
         };


         // binding
         this.regularFunction = this.regularFunction.bind(this);
       }


       regularFunction() {
         // regular function needs "binding" to access "this"
         console.log("this", this);
         this.setState({
           balance: 0,
         });
       }


       // arrow function don't need binding
       regularFunctionWithoutBinding() {
         console.log("this", this);
         this.setState({
           balance: this.state.balance - 10,
         });
       }


       arrowFunction = () => {
         console.log("this", this);
         this.setState({
           balance: this.state.balance + 10,
         });
       };


       render() {
         return (
           <div>
             继承者们的故事
             <div>Balance: {this.state.balance}</div>
             <button onClick={this.regularFunction}>破产</button>
             <button onClick={() => this.regularFunctionWithoutBinding()}>
               亏本 -10
             </button>
             <button onClick={this.arrowFunction}>盈利 +10</button>
             <br />
             <br />
             <br />
             <ChildA
               balance={this.state.balance}
               loseAllMoney={this.regularFunction}
             />
             <br />
             <br />
             <br />
             <ChildB
               balance={this.state.balance}
               makeMoney={this.arrowFunction}
             />
           </div>
         );
       }
     }


     class ChildA extends React.Component {
       render() {
         return (
           <div>
             ChildA
             <div>父母账号余额: {this.props.balance}</div>
             <button onClick={this.props.loseAllMoney}>努力</button>
           </div>
         );
       }
     }


     class ChildB extends React.Component {
       state = {
         balance: 0,
       };


       render() {
         return (
           <div>
             ChildB
             <div>父母账号余额: {this.props.balance}</div>
             <div>孩子自己的小金库 {this.state.balance}</div>
             <button onClick={this.props.makeMoney}>努力</button>
             <button
               onClick={() =>
                 this.setState({ balance: this.state.balance + 10 })
               }
             >
               挣钱
             </button>
           </div>
         );
       }
     }


     ReactDOM.render(<Parent />, document.getElementById("root"));
   </script>
 </body>
</html>




